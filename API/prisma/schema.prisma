datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id           String          @id @default(uuid())
  name         String
  email        String          @unique
  password     String
  phoneNumber  String
  address      String
  dateOfBirth  DateTime 
  createdAt    DateTime         @default(now())
  
  exerciseSessions ExerciseSession[]
  histories        History[]
}

model Admin {
  id           String          @id @default(uuid())
  name         String
  email        String          @unique
  password     String

  exercises    BreathingExercise[]
}

model BreathingExercise {
  id               String             @id @default(uuid())
  name             String
  description      String
  duration         Int
  level            String
  createdAt        DateTime           @default(now())

  adminId          String
  admin            Admin              @relation(fields: [adminId], references: [id])

  exerciseSessions ExerciseSession[]

  categories       Category[]         // Relation N:N implicite
}

model Category {
  id         String              @id @default(uuid())
  name       String              @unique
  createdAt  DateTime            @default(now())

  exercises  BreathingExercise[] // Relation N:N implicite
}

model ExerciseSession {
  id                String             @id @default(uuid())
  sessionDateTime   DateTime
  performedDuration Int
  
  userId            String
  user              User               @relation(fields: [userId], references: [id])

  exerciseId        String
  exercise          BreathingExercise  @relation(fields: [exerciseId], references: [id])
}

model History {
  id               String   @id @default(uuid())
  registrationDate DateTime
  comment          String

  userId           String
  user             User     @relation(fields: [userId], references: [id])
}
